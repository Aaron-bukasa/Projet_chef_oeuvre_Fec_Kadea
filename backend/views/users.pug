extends layout
  
block content
    div(class="h-full grid grid-cols-1 grid-rows-[max-content,auto] gap-y-6")
        section(class="col-start-1 col-end-2 row-start-1 row-end-2")
            h1(class="text-center mb-3 font-extrabold text-xl md:text-2xl lg:text-3xl xl:text-4xl") Gestion des comptes utilisateurs
            div(class="flex justify-between gap-x-12")
                form#search(action="#", method="GET" class="border-4 py-3 px-6 rounded-lg my-3 h-max bg-gray-50 rounded-lg w-1/2")
                    h2(class='text-2xl font-bold mb-2') Recherche
                    div(class="flex flex-col gap-3 mx-3")
                        input.search(type="search" placeholder="Recherche" class="border-2 py-1 px-2 focus:bg-slate-100")
                        button.filter(type="submit" class="bg-slate-500 hover:opacity-80 p-2 font-bold text-white rounded-lg my-2 block w-full md:w-[180px]") Filtrer
                ul.statistic(class="p-3 flex flex-col my-3 gap-y-4 bg-gray-50 rounded-lg w-1/2")
                    h2(class='text-2xl font-bold mb-2') Les statistiques
                    div(class="flex gap-x-6")
                        div
                            li Total comptes : !{users.length}
                            li Compte Utilisateurs : !{users.filter(user => user.role === 'utilisateur').length}
                        div
                            li Compte Membres : !{users.filter(user => user.role === 'membre').length}
                            li Compte Administrateur : !{users.filter(user => user.role === 'administrateur').length}
                           
                    li(class="xl:flex") 
                        a(href="/users/server" class="p-3 bg-gray-500 hover:opacity-80 rounded-lg text-white hover:opacity-80 font-semibold block my-4 text-center w-max xl:my-0")  Actualiser la page
        section.liste-users(class="bg-gray-50 p-3 rounded-lg col-start-1 col-end-2 row-start-2 row-end-3")
            h2(class="font-bold text-xl mb-3") Listes des utilisateurs
            table(class="w-full border-2 p-2 mb-6")
                thead
                    tr(class="py-2 bg-slate-200  border-b-2 border-slate-600")
                        th(class="text-center py-2 px-1") ID
                        th(class="text-center py-2 px-1") Nom complet
                        th(class="text-center py-2 px-1") Email 
                        th(class="text-center py-2 px-1") Telephone
                        th(class="text-center py-2 px-1") Role
                        th(class="text-center py-2 px-1") Status
                        th(class="text-center py-2 px-1") Verified
                        th(class="text-center py-2 px-1") Actions
                tbody
                    each user in users
                        tr(class="even:bg-slate-200 border-b-2 border-slate-600")
                            td(class="text-center py-2 px-1")= user.id
                            td(class="text-center py-2 px-1")= user.profil_user.nom
                            td(class="text-center py-2 px-1")= user.email
                            td(class="text-center py-2 px-1")= user.profil_user.telephone
                            td(class="text-center py-2 px-1")= user.role
                            td(class="text-center py-2 px-1")= user.profil_user.status_adhesion
                            td(class="text-center py-2 px-1")= user.verified
                            td(class="text-center py-2 px-1") 
                                a(href=`/users/server/${user.requestId}` class="font-semibold text-sky-blue hover:text-sky-blue visited:text-sky-blue") Voir

    script(src="/javascripts/users.js")


