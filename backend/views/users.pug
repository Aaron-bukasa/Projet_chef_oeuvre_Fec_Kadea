extends layout
  
block content
    div(class="h-full grid grid-cols-1 grid-rows-[max-content,auto] gap-y-6")
        section(class="col-start-1 col-end-2 row-start-1 row-end-2")
            h1(class="text-center mb-3 font-extrabold text-xl md:text-2xl lg:text-3xl xl:text-4xl") Gestion des comptes utilisateurs
            div(class="flex justify-between gap-x-6")
                form(action="#", method="GET" class="border-4 p-3 my-3 h-max bg-gray-50 rounded-lg w-1/2")
                    h2(class='text-2xl font-bold mb-2') Recherche
                    div(class="flex gap-3 mx-3")
                        input.search(type="search" placeholder="Recherche" class="border-2 py-1 px-2 focus:bg-slate-100")
                        button.filter(type="button" class="bg-sky-blue p-2 font-bold text-white rounded-lg my-2 block w-full md:w-[180px]") Filtrer
                ul.statistic(class="p-3 flex flex-col my-3 gap-y-4 bg-gray-50 rounded-lg w-1/2")
                    h2(class='text-2xl font-bold mb-2') Les statistiques
                    div(class="flex gap-x-6")
                        div
                            li Nombre total comptes: !{users.length}
                            li Nombre de compte utilisateurs: !{users.filter(user => user.role === 'utilisateur').length}
                        div
                            li Nombre de compte administrateur: !{users.filter(user => user.role === 'administrateur').length}
                           
                    li(class="xl:flex") 
                        a(href="/users/server" class="p-3 bg-sky-blue rounded-lg text-white hover:opacity-80 font-semibold block my-4 text-center w-max xl:my-0")  Actualiser la page
        section.liste-users(class="bg-gray-50 p-3 rounded-lg col-start-1 col-end-2 row-start-2 row-end-3")
            h2(class="font-bold text-xl mb-3") Listes des utilisateurs
            table(class="w-full border-2 p-2 mb-6")
                thead
                    tr(class="py-2 bg-gray-200")
                        th(class="text-center") ID
                        th(class="text-center") Nom complet
                        th(class="text-center") Email 
                        th(class="text-center") Telephone
                        th(class="text-center") Role
                        th(class="text-center") Status
                        th(class="text-center") Verified
                        th(class="text-center") Actions
                tbody
                    each user in users
                        tr
                            td(class="text-center")= user.id
                            td(class="text-center")= user.profil_user.nom
                            td(class="text-center")= user.email
                            td(class="text-center")= user.profil_user.telephone
                            td(class="text-center")= user.role
                            td(class="text-center")= user.profil_user.status_adhesion
                            td(class="text-center")= user.verified
                            td(class="text-center") 
                                a(href=`/users/server/${user.requestId}` class="font-semibold text-sky-blue hover:text-sky-blue visited:text-sky-blue") Voir

    script(src="/javascripts/users.js")


